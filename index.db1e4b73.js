function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},l={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in l){var t=l[e];delete l[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){l[e]=t},t.parcelRequired7c6=a);var o=a("cBso0");var r=e(a("amrNH")).template({1:function(e,t,n,l,a){var o,r=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,i="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <li class='gallery__item' id="+c(typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:s)===i?o.call(r,{name:"id",hash:{},data:a,loc:{start:{line:2,column:31},end:{line:2,column:37}}}):o)+">\n    <img\n      class='gallery__icon'\n      src='"+c(typeof(o=null!=(o=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?o:s)===i?o.call(r,{name:"poster_path",hash:{},data:a,loc:{start:{line:5,column:11},end:{line:5,column:26}}}):o)+"'\n      alt='"+c(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===i?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:6,column:11},end:{line:6,column:20}}}):o)+"'\n      width='280'\n      height='394'\n      loading='lazy'\n    />\n    <div class='item__description'>\n      <p class='item__title'>"+c(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===i?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:12,column:29},end:{line:12,column:38}}}):o)+"</p>\n      <p class='item__info'>\n        "+c(typeof(o=null!=(o=d(n,"genre_for_gallery")||(null!=t?d(t,"genre_for_gallery"):t))?o:s)===i?o.call(r,{name:"genre_for_gallery",hash:{},data:a,loc:{start:{line:14,column:8},end:{line:14,column:29}}}):o)+"&nbsp;\n        <span class='item__info--year'>&nbsp;"+c(typeof(o=null!=(o=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?o:s)===i?o.call(r,{name:"release_date",hash:{},data:a,loc:{start:{line:15,column:45},end:{line:15,column:61}}}):o)+"</span>\n\n      </p>\n    </div>\n  </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:20,column:9}}}))?o:""},useData:!0});o=a("cBso0");const s=document.querySelector(".header__icon use").href.baseVal,i=s.slice(0,s.indexOf("#")+1);function c(e,t){localStorage.setItem("pagesInfo",JSON.stringify({totalPages:e,currentPage:t}))}function d(){return JSON.parse(localStorage.getItem("pagesInfo")).totalPages}function u(){return JSON.parse(localStorage.getItem("pagesInfo")).currentPage}let m="",f=null;const p=`\n        <svg class="icon-points">\n          <use href="${i}icon-points"></use>\n        </svg>\n      `,h=document.querySelector(".pagination"),y=document.querySelector(".btn-right"),g=document.querySelector(".btn-left");document.querySelector(".pagination-wrapper");h.addEventListener("click",(function(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;const t=d(),n=Number(e.target.textContent.trim());c(t,n),S(n)})),y.addEventListener("click",(function(e){console.log("=>");let t=u();const n=d();if(n===t)return;t+=1,f&&f.classList.remove("current-page");c(n,t),S(t),b(n,t)})),g.addEventListener("click",(function(e){console.log("<=");let t=u();const n=d();if(1===t)return;t-=1,f&&f.classList.remove("current-page");c(n,t),S(t),b(n,t)}));const v=`<svg class="btn-icon">\n<use href="${i}icon-left"></use>\n</svg>`,_=`<svg class="btn-icon">\n<use href="${i}icon-right"></use>\n</svg>\n`;function b(e,t){h.innerHTML="",m="",function(e,t){1===t?(g.disabled=!0,g.innerHTML="",y.disabled=!1,y.innerHTML=_):t===e?(y.disabled=!0,y.innerHTML="",g.disabled=!1,g.innerHTML=v):(g.disabled=!1,y.disabled=!1,y.innerHTML=_,g.innerHTML=v)}(e,t),e<=5?(!function(e,t){for(let n=1;n<=e;n+=1)m+=t!==n?`<a href="">${n}</a>`:`<a class="current-page" href="">${n}</a>`;h.innerHTML=m}(e,t),1===e&&(y.style.display="none",g.style.display="none")):t>=e-4?function(e,t){m='<a class="start-end-el" href="">1</a>',m+=p;for(let n=e-4;n<=e;n+=1)m+=t!==n?`<a href="">${n}</a>`:`<a class="current-page" href="">${n}</a>`;h.innerHTML=m}(e,t):t<=5?function(e,t){for(let e=1;e<=5;e+=1)m+=t!==e?`<a href="">${e}</a>`:`<a class="current-page" href="">${e}</a>`;m+=p,m+=`<a class="start-end-el" href="">${e}</a>`,h.innerHTML=m}(e,t):function(e,t){m='<a class="start-end-el" href="">1</a>',m+=p;const n=t+2;for(let e=t-2;e<=n;e+=1)m+=t!==e?`<a href="">${e}</a>`:`<a class="current-page" href="">${e}</a>`;m+=p,m+=`<a class="start-end-el" href="">${e}</a>`,h.innerHTML=m}(e,t),f=document.querySelector(".current-page")}function L(e,t){if("renderTrendingMovies"!==e)if("findMoviesByQuery"!==e);else{const n={functionName:e,searchingQuery:t};localStorage.setItem("calledFunction",JSON.stringify(n))}else localStorage.setItem("calledFunction",JSON.stringify({functionName:e}))}function S(e){const t=JSON.parse(localStorage.getItem("calledFunction"));return"findMoviesByQuery"===t.functionName?(E(t.searchingQuery,e),void window.scrollTo(0,0)):"renderTrendingMovies"===t.functionName?(Y(e),void window.scrollTo(0,0)):void 0}var w=a("dSs1Y");const M=new(0,o.MovieApi),T=document.querySelector(".header__form"),q=document.querySelector(".header__warn"),k=document.querySelector(".gallery__list");let N="";async function E(e,t){try{const{data:{results:n,total_pages:l}}=await M.searchMovie(e,t);c(l,t);const a=M.getPreparedData(n);console.log(a),M.temproraryStoreMovies(a),k.innerHTML=r(a),b(d(),u()),L("findMoviesByQuery",e)}catch(e){console.log(e)}}T.addEventListener("submit",(async e=>{e.preventDefault();const t=e.target.elements["input-search"].value.trim();if(t&&N!==t){q.classList.add("is-hidden"),w.Loading.dots({svgColor:"#ff6b08"});try{const{data:{results:e,total_pages:n}}=await M.searchMovie(t,1);if(!n)return q.classList.remove("is-hidden"),setTimeout((()=>{q.classList.add("is-hidden")}),5e3),void w.Loading.remove();c(n,1);const l=M.getPreparedData(e);console.log(l),M.temproraryStoreMovies(l),k.innerHTML=r(l),b(d(),u()),L("findMoviesByQuery",t),N=t,w.Loading.remove()}catch(e){console.log(e)}}}));o=a("cBso0");var H=e(a("amrNH")).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o,r=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,i="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\n        <img\n          class="modal__poster"\n          src="'+c(typeof(o=null!=(o=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?o:s)===i?o.call(r,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:15},end:{line:4,column:30}}}):o)+'"\n          alt="'+c(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===i?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:5,column:15},end:{line:5,column:24}}}):o)+'"\n          width="240"\n          height="357"\n        />\n      <div class="modal__info">\n        <h3 class="modal__title">'+c(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===i?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:10,column:33},end:{line:10,column:42}}}):o)+'</h3>\n        <table class="modal__table">\n          <tbody>\n            <tr>\n              <th class="modal__subtitle--table">Vote / Votes</th>\n              <th class="modal__table--text">\n                <span class="modal__table--vote modal__rating">'+c(typeof(o=null!=(o=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?o:s)===i?o.call(r,{name:"vote_average",hash:{},data:a,loc:{start:{line:16,column:63},end:{line:16,column:79}}}):o)+'</span>\n                <span class="table--splash">/</span>\n                <span class="modal__rating">'+c(typeof(o=null!=(o=d(n,"vote_count")||(null!=t?d(t,"vote_count"):t))?o:s)===i?o.call(r,{name:"vote_count",hash:{},data:a,loc:{start:{line:18,column:44},end:{line:18,column:58}}}):o)+'</span>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal__subtitle--table">Popularity</th>\n              <th class="modal__table--text">'+c(typeof(o=null!=(o=d(n,"popularity")||(null!=t?d(t,"popularity"):t))?o:s)===i?o.call(r,{name:"popularity",hash:{},data:a,loc:{start:{line:23,column:45},end:{line:23,column:59}}}):o)+'</th>\n            </tr>\n            <tr>\n              <th class="modal__subtitle--table">Original Title</th>\n              <th class="modal__table--text">'+c(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:s)===i?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:27,column:45},end:{line:27,column:54}}}):o)+'</th>\n            </tr>\n            <tr>\n              <th class="modal__subtitle--table">Genre</th>\n              <th class="modal__table--text">'+c(typeof(o=null!=(o=d(n,"genre_ids")||(null!=t?d(t,"genre_ids"):t))?o:s)===i?o.call(r,{name:"genre_ids",hash:{},data:a,loc:{start:{line:31,column:45},end:{line:31,column:58}}}):o)+'</th>\n            </tr>\n          </tbody>\n        </table>\n        <h4 class="modal__subtitle">about</h4>\n        <p class="modal__desc">'+c(typeof(o=null!=(o=d(n,"overview")||(null!=t?d(t,"overview"):t))?o:s)===i?o.call(r,{name:"overview",hash:{},data:a,loc:{start:{line:36,column:31},end:{line:36,column:43}}}):o)+'\n        </p>\n    <div class="modal__btns">\n          <button type="button" class="btn--add active" data-add-watch>add to Watched</button>\n          <button type="button" class="btn--add" data-add-queue>add to queue</button>\n          <button type="button" class="btn--add btn--trailer" data-trailer>try to find trailer</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0}),O=a("5uEKZ"),I=(w=a("dSs1Y"),a("eWCmQ")),x=a("37v9V");x=a("37v9V");const A=new(0,o.MovieApi),Q={closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),gallery:document.querySelector(".gallery__list"),modalContainer:document.querySelector(".modal__container"),galleryItemId:document.querySelector(".gallery__item"),backdrop:document.querySelector(".backdrop"),body:document.querySelector("body")},P={watched:[],queue:[]},$=O.default.load("toWatched"),B=O.default.load("toQueue");function C(e){"Escape"===e.code&&(W(),document.removeEventListener("keydown",C),Q.body.style.overflow="visible")}function W(){Q.modal.classList.toggle("is-hidden"),Q.body.style.overflow="visible"}function D(){e(I).Notify.success("This movie has been successfully added to Watched")}function J(){e(I).Notify.failure("This movie you have in Watched")}function F(){e(I).Notify.success("This movie has been successfully added to Queue")}function V(){e(I).Notify.failure("This movie you have in Queue")}Q.gallery.addEventListener("click",(async function(e){if("UL"===e.target.nodeName)return;document.addEventListener("keydown",C),W();const t=Number(e.target.closest("LI").id);localStorage.setItem("idForTrailer",JSON.stringify(t)),w.Loading.dots({svgColor:"#ff6b08"}),Q.body.style.overflow="hidden";try{const e=A.getMovieFromStorageById(t);w.Loading.remove(),Q.modalContainer.innerHTML="",Q.modalContainer.insertAdjacentHTML("beforeend",H(e));const n={btnAddWatch:Q.modal.querySelector("[data-add-watch]"),btnAddQueue:Q.modal.querySelector("[data-add-queue]"),btnTrailer:Q.modal.querySelector("[data-trailer]")};n.btnTrailer.addEventListener("click",x.onTrailerBtnClick),n.btnAddWatch.addEventListener("click",(t=>{n.btnAddWatch.setAttribute("disabled",!0),n.btnAddWatch.classList.remove("active"),$&&0!==$.length||(P.watched.map((({id:e})=>e)).includes(e.id)?J():(P.watched.splice(0,0,e),O.default.save("toWatched",P.watched),D())),$.map((({id:e})=>e)).includes(e.id)?J():($.splice(0,0,e),O.default.save("toWatched",$),D())})),n.btnAddQueue.addEventListener("click",(t=>{n.btnAddQueue.setAttribute("disabled",!0),B&&0!==B.length||(P.queue.map((({id:e})=>e)).includes(e.id)?V():(P.queue.splice(0,0,e),O.default.save("toQueue",P.queue),F())),B.map((({id:e})=>e)).includes(e.id)?V():(B.splice(0,0,e),O.default.save("toQueue",B),F())}))}catch(e){console.log(e)}})),Q.closeModalBtn.addEventListener("click",W),Q.closeModalBtn.addEventListener("click",(()=>{document.removeEventListener("keydown",C)})),Q.backdrop.addEventListener("click",(function(e){if(e.target!==e.currentTarget)return;W(),document.querySelector(".modal__trailer").style.display="none",document.querySelector(".trailer").src="",document.removeEventListener("keydown",C),Q.body.style.overflow="visible"})),a("8Yq9A"),localStorage.getItem("pagesInfo")||c(1,1);const j=new(0,o.MovieApi),U=document.querySelector(".gallery__list");async function Y(e){try{const{data:{results:t,total_pages:n}}=await j.getTrendingMovies(e);c(n,e);const l=j.getPreparedData(t);j.temproraryStoreMovies(l),U.innerHTML=r(l),b(d(),u()),L("renderTrendingMovies")}catch(e){console.log(e)}}j.storeGenres(),localStorage.removeItem("temproraryStore"),Y(1);
//# sourceMappingURL=index.db1e4b73.js.map
