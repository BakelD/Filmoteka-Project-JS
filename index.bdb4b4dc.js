function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},l={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in l){var t=l[e];delete l[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){l[e]=t},t.parcelRequired7c6=a);var o=a("cBso0");var r=e(a("amrNH")).template({1:function(e,t,n,l,a){var o,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <li class='gallery__item' id="+s(typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:i)===c?o.call(r,{name:"id",hash:{},data:a,loc:{start:{line:2,column:31},end:{line:2,column:37}}}):o)+">\n    <img\n      class='gallery__icon'\n      src='"+s(typeof(o=null!=(o=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?o:i)===c?o.call(r,{name:"poster_path",hash:{},data:a,loc:{start:{line:5,column:11},end:{line:5,column:26}}}):o)+"'\n      alt='"+s(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:i)===c?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:6,column:11},end:{line:6,column:20}}}):o)+"'\n      width='280'\n      height='394'\n      loading='lazy'\n    />\n    <div class='item__description'>\n      <p class='item__title'>"+s(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:i)===c?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:12,column:29},end:{line:12,column:38}}}):o)+"</p>\n      <p class='item__info'>\n        "+s(typeof(o=null!=(o=d(n,"genre_for_gallery")||(null!=t?d(t,"genre_for_gallery"):t))?o:i)===c?o.call(r,{name:"genre_for_gallery",hash:{},data:a,loc:{start:{line:14,column:8},end:{line:14,column:29}}}):o)+"&nbsp;\n        <span class='item__info--year'>&nbsp;"+s(typeof(o=null!=(o=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?o:i)===c?o.call(r,{name:"release_date",hash:{},data:a,loc:{start:{line:15,column:45},end:{line:15,column:61}}}):o)+"</span>\n\n      </p>\n    </div>\n  </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:20,column:9}}}))?o:""},useData:!0});o=a("cBso0");const i=document.querySelector(".header__icon use").href.baseVal,c=i.slice(0,i.indexOf("#")+1);function s(e,t){localStorage.setItem("pagesInfo",JSON.stringify({totalPages:e,currentPage:t}))}function d(){return JSON.parse(localStorage.getItem("pagesInfo")).totalPages}function u(){return JSON.parse(localStorage.getItem("pagesInfo")).currentPage}let m="",p=null;const f=`\n        <svg class="icon-points">\n          <use href="${c}icon-points"></use>\n        </svg>\n      `,h=document.querySelector(".pagination"),y=document.querySelector(".btn-right"),g=document.querySelector(".btn-left");document.querySelector(".pagination-wrapper");h.addEventListener("click",(function(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;const t=d(),n=Number(e.target.textContent.trim());s(t,n),w(n)})),y.addEventListener("click",(function(e){let t=u();const n=d();if(n===t)return;t+=1,p&&p.classList.remove("current-page");s(n,t),w(t),b(n,t)})),g.addEventListener("click",(function(e){let t=u();const n=d();if(1===t)return;t-=1,p&&p.classList.remove("current-page");s(n,t),w(t),b(n,t)}));const _=`<svg class="btn-icon">\n<use href="${c}icon-left"></use>\n</svg>`,v=`<svg class="btn-icon">\n<use href="${c}icon-right"></use>\n</svg>\n`;function b(e,t){h.innerHTML="",m="",function(e,t){1===t?(g.disabled=!0,g.innerHTML="",y.disabled=!1,y.innerHTML=v):t===e?(y.disabled=!0,y.innerHTML="",g.disabled=!1,g.innerHTML=_):(g.disabled=!1,y.disabled=!1,y.innerHTML=v,g.innerHTML=_)}(e,t),e<=5?(!function(e,t){for(let n=1;n<=e;n+=1)m+=t!==n?`<a href="">${n}</a>`:`<a class="current-page" href="">${n}</a>`;h.innerHTML=m}(e,t),1===e&&(y.style.display="none",g.style.display="none")):t>=e-4?function(e,t){m='<a class="start-end-el" href="">1</a>',m+=f;for(let n=e-4;n<=e;n+=1)m+=t!==n?`<a href="">${n}</a>`:`<a class="current-page" href="">${n}</a>`;h.innerHTML=m}(e,t):t<=5?function(e,t){for(let e=1;e<=5;e+=1)m+=t!==e?`<a href="">${e}</a>`:`<a class="current-page" href="">${e}</a>`;m+=f,m+=`<a class="start-end-el" href="">${e}</a>`,h.innerHTML=m}(e,t):function(e,t){m='<a class="start-end-el" href="">1</a>',m+=f;const n=t+2;for(let e=t-2;e<=n;e+=1)m+=t!==e?`<a href="">${e}</a>`:`<a class="current-page" href="">${e}</a>`;m+=f,m+=`<a class="start-end-el" href="">${e}</a>`,h.innerHTML=m}(e,t),p=document.querySelector(".current-page")}function L(e,t){if("renderTrendingMovies"!==e)if("findMoviesByQuery"!==e)"now_playing"!==e&&"top_rated"!==e&&"upcoming"!==e||localStorage.setItem("calledFunction",JSON.stringify({functionName:e}));else{const n={functionName:e,searchingQuery:t};localStorage.setItem("calledFunction",JSON.stringify(n))}else localStorage.setItem("calledFunction",JSON.stringify({functionName:e}))}function w(e){const t=JSON.parse(localStorage.getItem("calledFunction"));return"findMoviesByQuery"===t.functionName?(O(t.searchingQuery,e),void window.scrollTo(0,0)):"renderTrendingMovies"===t.functionName?(K(e),void window.scrollTo(0,0)):"now_playing"===t.functionName||"top_rated"===t.functionName||"upcoming"===t.functionName?(x(t.functionName,e),void window.scrollTo(0,0)):void 0}var S=a("dSs1Y");var M=e(a("amrNH")).template({1:function(e,t,n,l,a){var o,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <li class='gallery__item' id="+s(typeof(o=null!=(o=d(n,"id")||(null!=t?d(t,"id"):t))?o:i)===c?o.call(r,{name:"id",hash:{},data:a,loc:{start:{line:2,column:31},end:{line:2,column:37}}}):o)+">\n    <img\n      class='gallery__icon'\n      src='"+s(typeof(o=null!=(o=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?o:i)===c?o.call(r,{name:"poster_path",hash:{},data:a,loc:{start:{line:5,column:11},end:{line:5,column:26}}}):o)+"'\n      alt='"+s(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:i)===c?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:6,column:11},end:{line:6,column:20}}}):o)+"'\n      width='280'\n      height='394'\n      loading='lazy'\n    />\n    <div class='item__description'>\n      <p class='item__title'>"+s(typeof(o=null!=(o=d(n,"title")||(null!=t?d(t,"title"):t))?o:i)===c?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:12,column:29},end:{line:12,column:38}}}):o)+"</p>\n      <p class='item__info'>\n        "+s(typeof(o=null!=(o=d(n,"genre_for_gallery")||(null!=t?d(t,"genre_for_gallery"):t))?o:i)===c?o.call(r,{name:"genre_for_gallery",hash:{},data:a,loc:{start:{line:14,column:8},end:{line:14,column:29}}}):o)+"&nbsp;\n        <span class='item__info--year'>&nbsp;"+s(typeof(o=null!=(o=d(n,"release_date")||(null!=t?d(t,"release_date"):t))?o:i)===c?o.call(r,{name:"release_date",hash:{},data:a,loc:{start:{line:15,column:45},end:{line:15,column:61}}}):o)+"</span>\n\n      </p>\n    </div>\n  </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:20,column:9}}}))?o:""},useData:!0});const T=new(0,o.MovieApi),q=document.querySelector(".header__form"),N=document.querySelector(".header__warn"),k=document.querySelector(".gallery__list");let E="";async function O(e,t){try{const{data:{results:n,total_pages:l}}=await T.searchMovie(e,t);s(l,t);const a=T.getPreparedData(n);T.temproraryStoreMovies(a),k.innerHTML=r(a),b(d(),u()),L("findMoviesByQuery",e)}catch(e){console.log(e)}}q.addEventListener("submit",(async e=>{e.preventDefault();const t=e.target.elements["input-search"].value.trim();if(t&&E!==t){N.classList.add("is-hidden"),S.Loading.dots({svgColor:"#ff6b08"});try{const{data:{results:e,total_pages:n}}=await T.searchMovie(t,1);if(!n)return N.classList.remove("is-hidden"),setTimeout((()=>{N.classList.add("is-hidden")}),5e3),void S.Loading.remove();s(n,1);const l=T.getPreparedData(e);T.temproraryStoreMovies(l),k.innerHTML=r(l),b(d(),u()),L("findMoviesByQuery",t),E=t,S.Loading.remove()}catch(e){console.log(e)}}}));const P={btnNowPlaying:document.querySelector(".btn__now-playing"),btnTopRated:document.querySelector(".btn__top-rated"),btnUpcoming:document.querySelector(".btn__upcoming")};function H(e){let t=null;document.querySelector(".filter__current")&&document.querySelector(".filter__current").classList.remove("filter__current"),"Now playing"===e.target.innerHTML.trim()?(t="now_playing",P.btnNowPlaying.classList.add("filter__current")):"Top Rated"===e.target.innerHTML.trim()?(t="top_rated",P.btnTopRated.classList.add("filter__current")):(t=e.target.innerHTML.trim().toLowerCase(),P.btnUpcoming.classList.add("filter__current")),x(t,1)}async function x(e,t){S.Loading.dots({svgColor:"#ff6b08"});try{const{data:{results:n,total_pages:l}}=await T.getMoviesByFilter(e,t);s(l,t);const a=T.getPreparedData(n);T.temproraryStoreMovies(a),k.innerHTML=M(a),b(l,t),L(e,e),S.Loading.remove()}catch(e){console.log(e)}}P.btnNowPlaying.addEventListener("click",H),P.btnTopRated.addEventListener("click",H),P.btnUpcoming.addEventListener("click",H);o=a("cBso0");var I=e(a("amrNH")).template({1:function(e,t,n,l,a){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n              "+e.escapeExpression(e.lambda(t,t))+(null!=(o=r(n,"unless").call(null!=t?t:e.nullContext||{},a&&r(a,"last"),{name:"unless",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:31,column:22},end:{line:31,column:51}}}))?o:"")},2:function(e,t,n,l,a){return","},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o,r,i=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <img\n          class="modal__poster"\n          src="'+d(typeof(r=null!=(r=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?r:c)===s?r.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:3,column:15},end:{line:3,column:30}}}):r)+'"\n          alt="'+d(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:c)===s?r.call(i,{name:"title",hash:{},data:a,loc:{start:{line:4,column:15},end:{line:4,column:24}}}):r)+'"\n          width="240"\n          height="357"\n        />\n      <div class="modal__info">\n        <h3 class="modal__title">'+d(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:c)===s?r.call(i,{name:"title",hash:{},data:a,loc:{start:{line:9,column:33},end:{line:9,column:42}}}):r)+'</h3>\n        <table class="modal__table">\n          <tbody>\n            <tr>\n              <th class="modal__subtitle--table">Vote / Votes</th>\n              <th class="modal__table--text">\n                <span class="modal__table--vote modal__rating">'+d(typeof(r=null!=(r=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?r:c)===s?r.call(i,{name:"vote_average",hash:{},data:a,loc:{start:{line:15,column:63},end:{line:15,column:79}}}):r)+'</span>\n                <span class="table--splash">/</span>\n                <span class="modal__rating">'+d(typeof(r=null!=(r=u(n,"vote_count")||(null!=t?u(t,"vote_count"):t))?r:c)===s?r.call(i,{name:"vote_count",hash:{},data:a,loc:{start:{line:17,column:44},end:{line:17,column:58}}}):r)+'</span>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal__subtitle--table">Popularity</th>\n              <th class="modal__table--text">'+d(typeof(r=null!=(r=u(n,"popularity")||(null!=t?u(t,"popularity"):t))?r:c)===s?r.call(i,{name:"popularity",hash:{},data:a,loc:{start:{line:22,column:45},end:{line:22,column:59}}}):r)+'</th>\n            </tr>\n            <tr>\n              <th class="modal__subtitle--table">Original Title</th>\n              <th class="modal__table--text">'+d(typeof(r=null!=(r=u(n,"title")||(null!=t?u(t,"title"):t))?r:c)===s?r.call(i,{name:"title",hash:{},data:a,loc:{start:{line:26,column:45},end:{line:26,column:54}}}):r)+'</th>\n            </tr>\n            <tr>\n              <th class="modal__subtitle--table">Genre</th>\n              <th class="modal__table--text">'+(null!=(o=u(n,"each").call(i,null!=t?u(t,"genre_ids"):t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:30,column:45},end:{line:31,column:60}}}))?o:"")+'</th>\n            </tr>\n          </tbody>\n        </table>\n        <h4 class="modal__subtitle">about</h4>\n        <p class="modal__desc">'+d(typeof(r=null!=(r=u(n,"overview")||(null!=t?u(t,"overview"):t))?r:c)===s?r.call(i,{name:"overview",hash:{},data:a,loc:{start:{line:36,column:31},end:{line:36,column:43}}}):r)+'\n        </p>\n    <div class="modal__btns">\n          <button type="button" class="btn--add active" data-add-watch>add to Watched</button>\n          <button type="button" class="btn--add" data-add-queue>add to queue</button>\n          <button type="button" class="btn--add btn--trailer" data-trailer>try to find trailer</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0}),C=a("5uEKZ"),A=(S=a("dSs1Y"),a("eWCmQ")),Q=a("37v9V");Q=a("37v9V");const B=new(0,o.MovieApi),$={closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),gallery:document.querySelector(".gallery__list"),modalContainer:document.querySelector(".modal__container"),galleryItemId:document.querySelector(".gallery__item"),backdrop:document.querySelector(".backdrop"),body:document.querySelector("body")},D={watched:[],queue:[]},W=C.default.load("toWatched"),F=C.default.load("toQueue");function J(e){"Escape"===e.code&&(j(),document.removeEventListener("keydown",J),$.body.style.overflow="visible")}function j(){$.modal.classList.toggle("is-hidden"),$.body.style.overflow="visible"}function R(){e(A).Notify.success("This movie has been successfully added to Watched")}function U(){e(A).Notify.failure("This movie you have in Watched")}function V(){e(A).Notify.success("This movie has been successfully added to Queue")}function Y(){e(A).Notify.failure("This movie you have in Queue")}$.gallery.addEventListener("click",(async function(e){if("UL"===e.target.nodeName)return;document.addEventListener("keydown",J),j();const t=Number(e.target.closest("LI").id);localStorage.setItem("idForTrailer",JSON.stringify(t)),S.Loading.dots({svgColor:"#ff6b08"}),$.body.style.overflow="hidden";try{const e=B.getMovieFromStorageById(t);S.Loading.remove(),$.modalContainer.innerHTML="",$.modalContainer.insertAdjacentHTML("beforeend",I(e));const n={btnAddWatch:$.modal.querySelector("[data-add-watch]"),btnAddQueue:$.modal.querySelector("[data-add-queue]"),btnTrailer:$.modal.querySelector("[data-trailer]")};n.btnTrailer.addEventListener("click",Q.onTrailerBtnClick),n.btnAddWatch.addEventListener("click",(t=>{n.btnAddWatch.setAttribute("disabled",!0),n.btnAddWatch.classList.remove("active"),W&&0!==W.length?W.map((({id:e})=>e)).includes(e.id)?U():(W.splice(0,0,e),C.default.save("toWatched",W),R()):D.watched.map((({id:e})=>e)).includes(e.id)?U():(D.watched.splice(0,0,e),C.default.save("toWatched",D.watched),R())})),n.btnAddQueue.addEventListener("click",(t=>{n.btnAddQueue.setAttribute("disabled",!0),F&&0!==F.length?F.map((({id:e})=>e)).includes(e.id)?Y():(F.splice(0,0,e),C.default.save("toQueue",F),V()):D.queue.map((({id:e})=>e)).includes(e.id)?Y():(D.queue.splice(0,0,e),C.default.save("toQueue",D.queue),V())}))}catch(e){console.log(e)}})),$.closeModalBtn.addEventListener("click",j),$.closeModalBtn.addEventListener("click",(()=>{document.removeEventListener("keydown",J)})),$.backdrop.addEventListener("click",(function(e){if(e.target!==e.currentTarget)return;j(),document.querySelector(".modal__trailer").style.display="none",document.querySelector(".trailer").src="",document.removeEventListener("keydown",J),$.body.style.overflow="visible"})),a("8Yq9A"),localStorage.getItem("pagesInfo")||s(1,1);const z=new(0,o.MovieApi),G=document.querySelector(".gallery__list");async function K(e){try{const{data:{results:t,total_pages:n}}=await z.getTrendingMovies(e);s(n,e);const l=z.getPreparedData(t);z.temproraryStoreMovies(l),G.innerHTML=r(l),b(d(),u()),L("renderTrendingMovies")}catch(e){console.log(e)}}z.storeGenres(),localStorage.removeItem("temproraryStore"),K(1);
//# sourceMappingURL=index.bdb4b4dc.js.map
